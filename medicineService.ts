  {
    id: 'dolo-650',
    name: 'Dolo 650',
    form: 'Tablet',
    strength: '650mg',
    purpose: 'Dolo 650 is used to temporarily relieve fever and mild to moderate pain such as headache, toothache, menstrual cramps, arthritis pain, and cold/flu symptoms. It contains Paracetamol which works by reducing fever and blocking pain signals in the body.',
    benefits: [
      'Fast and effective fever reduction',
      'Relieves mild to moderate pain',
      'Safe for most adults and children above 12 years',
      'Can be taken with or without food',
      'Generally well-tolerated with minimal side effects'
    ],
    ingredients: ['Paracetamol IP 650mg', 'Maize starch', 'Pregelatinised starch', 'Povidone', 'Stearic acid', 'Talc'],
    categories: ['Analgesic', 'Antipyretic'],
    conditions: [
      'Fever',
      'Headache',
      'Body pain',
      'Toothache',
      'Arthritis pain',
      'Common cold',
      'Post-vaccination fever'
    ],
    warnings: [
      'Do not exceed the recommended dose of 4 tablets in 24 hours',
      'Not recommended for children under 12 years without medical advice',
      'Avoid alcohol while taking this medicine',
      'Consult doctor if symptoms persist for more than 3 days',
      'Not recommended for patients with severe liver disease'
    ],
    sideEffects: {
      common: [
        'Generally well-tolerated at recommended doses',
        'Mild nausea or stomach discomfort',
        'Mild skin reactions in rare cases'
      ],
      serious: [
        'Severe allergic reactions (rare)',
        'Liver damage (with prolonged use or overdose)',
        'Unusual bleeding or bruising',
        'Severe skin reactions (very rare)',
        'Breathing difficulties (seek immediate medical attention)'
      ]
    },
    overdoseEffects: 'Paracetamol overdose is a medical emergency that can cause severe liver damage. Early symptoms include nausea, vomiting, excessive sweating, and abdominal pain. Seek immediate medical attention if overdose is suspected, even if you feel well, as symptoms of liver damage may not appear for 24-48 hours.',
    dosage: {
      description: 'Take with a full glass of water. Can be taken with or without food. Space doses evenly throughout the day.',
      ageGroups: [
        {
          group: 'Adults and children over 12 years',
          dosage: '1 tablet every 4-6 hours when required',
          notes: 'Maximum 4 tablets (2600mg) in 24 hours'
        },
        {
          group: 'Children 6-12 years',
          dosage: 'Consult healthcare provider',
          notes: 'Lower strength formulations recommended'
        },
        {
          group: 'Children under 6 years',
          dosage: 'Not recommended',
          notes: 'Use pediatric formulations as advised by doctor'
        }
      ]
    },
    administration: 'Swallow tablet whole with water. Do not crush or chew. Can be taken before or after meals. If taken for fever, monitor temperature regularly.',
    storage: {
      temperature: 'Store below 30°C in a dry place',
      instructions: 'Keep away from direct sunlight and moisture. Keep out of reach of children.'
    },
    expiryDate: '2025-06-30',
    disposal: 'Return unused or expired medicine to a pharmacy for safe disposal. Do not flush down the toilet or throw in household trash.'
  },
  {
    id: 'crocin-advance',
    name: 'Crocin Advance',
    form: 'Tablet',
    strength: '500mg',
    purpose: 'Crocin Advance contains Paracetamol and provides faster relief from fever and mild to moderate pain compared to regular paracetamol tablets. It uses advanced formulation technology for quicker absorption.',
    benefits: [
      'Rapid pain relief',
      'Quick fever reduction',
      'Advanced formulation for faster action',
      'Suitable for most adults',
      'Can be taken on empty stomach'
    ],
    ingredients: ['Paracetamol IP 500mg', 'Advanced carrier system', 'Microcrystalline cellulose', 'Sodium starch glycolate'],
    categories: ['Analgesic', 'Antipyretic', 'Fast-Acting'],
    conditions: [
      'Fever',
      'Headache',
      'Migraine',
      'Dental pain',
      'Muscular pain',
      'Post-vaccination fever',
      'Cold and flu symptoms'
    ],
    warnings: [
      'Do not exceed 8 tablets in 24 hours',
      'Not for children under 12 years without medical advice',
      'Avoid alcohol consumption',
      'Not recommended during pregnancy without medical advice',
      'Stop use if allergic reactions occur'
    ],
    sideEffects: {
      common: [
        'Mild stomach discomfort',
        'Slight drowsiness',
        'Temporary fatigue'
      ],
      serious: [
        'Severe allergic reactions',
        'Liver problems',
        'Unusual bleeding',
        'Severe skin reactions',
        'Breathing problems'
      ]
    },
    overdoseEffects: 'Overdose can cause severe liver damage. Symptoms include nausea, vomiting, loss of appetite, and abdominal pain. Immediate medical attention is required even if no symptoms are present.',
    dosage: {
      description: 'Take with water as needed. Space doses by at least 4 hours.',
      ageGroups: [
        {
          group: 'Adults and children over 12 years',
          dosage: '1-2 tablets every 4-6 hours',
          notes: 'Maximum 8 tablets in 24 hours'
        },
        {
          group: 'Children 6-12 years',
          dosage: 'Consult doctor',
          notes: 'Use pediatric formulation'
        },
        {
          group: 'Not recommended for children under 6 years',
          dosage: 'Consult pediatrician'
        }
      ]
    },
    administration: 'Take with water. Can be taken with or without food. For fever, monitor temperature regularly.',
    storage: {
      temperature: 'Store below 30°C',
      instructions: 'Keep in original package away from moisture and sunlight.'
    },
    expiryDate: '2025-03-15',
    disposal: 'Return to pharmacy for proper disposal. Do not dispose in household waste.'
  },
  {
    id: 'azithral-500',
    name: 'Azithral 500',
    form: 'Tablet',
    strength: '500mg',
    purpose: 'Azithral 500 is an antibiotic used to treat various bacterial infections including respiratory tract infections, skin infections, ear infections, and sexually transmitted diseases. It contains Azithromycin, which belongs to the macrolide class of antibiotics.',
    benefits: [
      'Broad-spectrum antibiotic coverage',
      'Once-daily dosing',
      'Shorter treatment duration',
      'Good tissue penetration',
      'Generally well-tolerated'
    ],
    ingredients: ['Azithromycin Dihydrate IP eq. to Azithromycin 500mg', 'Dibasic Calcium Phosphate', 'Pregelatinized Starch'],
    categories: ['Antibiotic', 'Macrolide'],
    conditions: [
      'Respiratory tract infections',
      'Skin infections',
      'Ear infections',
      'Sinusitis',
      'Pharyngitis',
      'Tonsillitis',
      'Sexually transmitted infections'
    ],
    warnings: [
      'Complete the full course as prescribed',
      'Take on empty stomach 1 hour before or 2 hours after meals',
      'Not suitable for patients with liver or kidney problems',
      'May cause heart rhythm problems in some patients',
      'Inform doctor about any allergies or medical conditions'
    ],
    sideEffects: {
      common: [
        'Nausea and vomiting',
        'Diarrhea',
        'Stomach pain',
        'Loss of appetite',
        'Dizziness'
      ],
      serious: [
        'Severe allergic reactions',
        'Irregular heartbeat',
        'Severe diarrhea',
        'Liver problems',
        'Hearing problems'
      ]
    },
    overdoseEffects: 'Overdose may cause severe gastrointestinal problems, liver dysfunction, and heart rhythm abnormalities. Seek immediate medical attention if overdose is suspected.',
    dosage: {
      description: 'Take as prescribed by your doctor. Usually taken once daily.',
      ageGroups: [
        {
          group: 'Adults and children over 45kg',
          dosage: '500mg once daily for 3-5 days',
          notes: 'Duration depends on type of infection'
        },
        {
          group: 'Children 15-45kg',
          dosage: 'Based on weight - consult doctor',
          notes: 'Usually 10mg/kg once daily'
        },
        {
          group: 'Children under 15kg',
          dosage: 'Not recommended in tablet form',
          notes: 'Use suspension form as prescribed'
        }
      ]
    },
    administration: 'Take on an empty stomach, 1 hour before or 2 hours after meals. Complete the full course even if you feel better.',
    storage: {
      temperature: 'Store below 30°C',
      instructions: 'Protect from light and moisture. Keep out of reach of children.'
    },
    expiryDate: '2024-12-10',
    disposal: 'Return unused antibiotics to pharmacy. Do not flush or dispose in regular trash.'
  },
  {
    id: 'pantop-40',
    name: 'Pantop 40',
    form: 'Tablet',
    strength: '40mg',
    purpose: 'Pantop 40 contains Pantoprazole, a proton pump inhibitor (PPI) that reduces acid production in the stomach. It is used to treat acid reflux, peptic ulcers, and other conditions where stomach acid needs to be reduced.',
    benefits: [
      'Effectively reduces stomach acid production',
      'Relieves acid reflux symptoms',
      'Helps heal stomach ulcers',
      'Once daily dosing',
      'Can prevent ulcer recurrence'
    ],
    ingredients: ['Pantoprazole Sodium IP eq. to Pantoprazole 40mg', 'Mannitol', 'Sodium Carbonate', 'Enteric coating'],
    categories: ['Proton Pump Inhibitor', 'Anti-Ulcer'],
    conditions: [
      'Acid reflux (GERD)',
      'Peptic ulcers',
      'Stomach ulcers',
      'Zollinger-Ellison syndrome',
      'Erosive esophagitis'
    ],
    warnings: [
      'Take on empty stomach before breakfast',
      'Do not crush or chew the tablet',
      'Long-term use may increase risk of bone fractures',
      'May interfere with certain medications',
      'Inform doctor if pregnant or planning pregnancy'
    ],
    sideEffects: {
      common: [
        'Headache',
        'Nausea',
        'Stomach pain',
        'Diarrhea',
        'Dizziness'
      ],
      serious: [
        'Severe allergic reactions',
        'Kidney problems',
        'Low magnesium levels',
        'Vitamin B12 deficiency',
        'Increased risk of bone fractures'
      ]
    },
    overdoseEffects: 'Overdose symptoms may include confusion, drowsiness, blurred vision, rapid heartbeat, nausea, and dry mouth. Seek immediate medical attention if overdose is suspected.',
    dosage: {
      description: 'Take one tablet daily before breakfast. Swallow whole with water.',
      ageGroups: [
        {
          group: 'Adults and adolescents 12 years and older',
          dosage: '40mg once daily',
          notes: 'Duration depends on condition being treated'
        },
        {
          group: 'Children under 12 years',
          dosage: 'Not recommended',
          notes: 'Consult pediatrician for alternatives'
        }
      ]
    },
    administration: 'Take one tablet in the morning before breakfast. Swallow whole with water. Do not crush, chew, or break the tablet.',
    storage: {
      temperature: 'Store below 25°C',
      instructions: 'Keep in original package to protect from moisture.'
    },
    expiryDate: '2025-08-15',
    disposal: 'Return unused medicine to pharmacy for safe disposal.'
  },
  {
    id: 'montair-lc',
    name: 'Montair LC',
    form: 'Tablet',
    strength: '10mg/5mg',
    purpose: 'Montair LC combines Montelukast and Levocetirizine to treat allergic symptoms like sneezing, runny nose, and breathing difficulties. It is particularly effective for allergic rhinitis and asthma symptoms.',
    benefits: [
      'Dual action against allergies',
      '24-hour relief from allergy symptoms',
      'Reduces asthma symptoms',
      'Non-drowsy formula',
      'Once daily dosing'
    ],
    ingredients: [
      'Montelukast Sodium IP eq. to Montelukast 10mg',
      'Levocetirizine Dihydrochloride IP 5mg',
      'Microcrystalline cellulose',
      'Lactose'
    ],
    categories: ['Anti-Allergic', 'Bronchodilator'],
    conditions: [
      'Allergic rhinitis',
      'Seasonal allergies',
      'Asthma',
      'Hay fever',
      'Dust allergies',
      'Pet allergies'
    ],
    warnings: [
      'May cause mood changes or behavior changes',
      'Not for acute asthma attacks',
      'Avoid alcohol consumption',
      'May cause drowsiness in some patients',
      'Not recommended during pregnancy without medical advice'
    ],
    sideEffects: {
      common: [
        'Mild headache',
        'Drowsiness',
        'Dry mouth',
        'Fatigue',
        'Stomach upset'
      ],
      serious: [
        'Mood changes',
        'Allergic reactions',
        'Liver problems',
        'Depression',
        'Suicidal thoughts (rare)'
      ]
    },
    overdoseEffects: 'Overdose may cause drowsiness, restlessness, and rapid heartbeat. In severe cases, it may cause confusion and seizures. Seek immediate medical attention.',
    dosage: {
      description: 'Take one tablet daily in the evening.',
      ageGroups: [
        {
          group: 'Adults and children over 15 years',
          dosage: '1 tablet once daily',
          notes: 'Take in the evening'
        },
        {
          group: 'Children 6-15 years',
          dosage: 'As prescribed by doctor',
          notes: 'Different strength available'
        },
        {
          group: 'Children under 6 years',
          dosage: 'Not recommended',
          notes: 'Use pediatric formulation'
        }
      ]
    },
    administration: 'Take one tablet daily in the evening with or without food. Swallow whole with water.',
    storage: {
      temperature: 'Store below 30°C',
      instructions: 'Protect from light and moisture.'
    },
    expiryDate: '2025-05-20',
    disposal: 'Return unused medicine to pharmacy for proper disposal.'
  }
];

// Local storage keys
const BOOKMARKS_KEY = 'mediscan_bookmarks';

// Get bookmarked medicine IDs from local storage
const getBookmarkedIds = (): string[] => {
  const stored = localStorage.getItem(BOOKMARKS_KEY);
  return stored ? JSON.parse(stored) : [];
};

// Save bookmarked medicine IDs to local storage
const saveBookmarkedIds = (ids: string[]): void => {
  localStorage.setItem(BOOKMARKS_KEY, JSON.stringify(ids));
};

// Function to scan medicine (mock implementation)
export const scanMedicine = async (imageData: string): Promise<string | null> => {
  // Simulate API call delay
  await new Promise(resolve => setTimeout(resolve, 1500));
  
  // For demo purposes, return a random medicine ID
  const index = Math.floor(Math.random() * mockMedicines.length);
  return mockMedicines[index].id;
};

// Function to get medicine details
export const getMedicineDetails = async (id: string): Promise<Medicine> => {
  // Simulate API call delay
  await new Promise(resolve => setTimeout(resolve, 700));
  
  const bookmarkedIds = getBookmarkedIds();
  const medicine = mockMedicines.find(med => med.id === id);
  
  if (!medicine) {
    throw new Error('Medicine not found');
  }
  
  return {
    ...medicine,
    isBookmarked: bookmarkedIds.includes(id)
  };
};

// Function to search medicines
export const searchMedicines = async (
  query: string, 
  filters?: { categories?: string[], forms?: string[] }
): Promise<Medicine[]> => {
  // Simulate API call delay
  await new Promise(resolve => setTimeout(resolve, 1000));
  
  const bookmarkedIds = getBookmarkedIds();
  
  let results = mockMedicines.filter(medicine => {
    const matchesQuery = medicine.name.toLowerCase().includes(query.toLowerCase()) ||
                         medicine.ingredients.some(ing => ing.toLowerCase().includes(query.toLowerCase())) ||
                         medicine.conditions.some(condition => condition.toLowerCase().includes(query.toLowerCase()));
    
    // Apply category filter if provided
    const matchesCategory = !filters?.categories?.length || 
                          medicine.categories.some(cat => 
                            filters.categories?.includes(cat));
    
    // Apply form filter if provided
    const matchesForm = !filters?.forms?.length || 
                        filters.forms.includes(medicine.form);
    
    return matchesQuery && matchesCategory && matchesForm;
  });
  
  // Add bookmark information
  results = results.map(medicine => ({
    ...medicine,
    isBookmarked: bookmarkedIds.includes(medicine.id)
  }));
  
  return results;
};

// Function to toggle bookmark status
export const toggleBookmark = async (id: string): Promise<boolean> => {
  // Simulate API call delay
  await new Promise(resolve => setTimeout(resolve, 300));
  
  const bookmarkedIds = getBookmarkedIds();
  
  if (bookmarkedIds.includes(id)) {
    // Remove bookmark
    const updated = bookmarkedIds.filter(bookmarkId => bookmarkId !== id);
    saveBookmarkedIds(updated);
    return false;
  } else {
    // Add bookmark
    saveBookmarkedIds([...bookmarkedIds, id]);
    return true;
  }
};

// Function to get all bookmarked medicines
export const getBookmarkedMedicines = async (): Promise<Medicine[]> => {
  // Simulate API call delay
  await new Promise(resolve => setTimeout(resolve, 700));
  
  const bookmarkedIds = getBookmarkedIds();
  
  return mockMedicines
    .filter(medicine => bookmarkedIds.includes(medicine.id))
    .map(medicine => ({
      ...medicine,
      isBookmarked: true
    }));
};
